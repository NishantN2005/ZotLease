# ZotLease

TABLE SCHEMAS:
CREATE TABLE IF NOT EXISTS users (
id SERIAL PRIMARY KEY,
fname VARCHAR(100) NOT NULL,
lname VARCHAR(100) NOT NULL,
email VARCHAR(100) UNIQUE NOT NULL,
password TEXT NOT NULL,
userID TEXT UNIQUE NOT NULL
last_notification_sent TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE refresh_token_blacklist (
token_id UUID PRIMARY KEY,
expiry TIMESTAMP NOT NULL
)

CREATE TABLE sublease (
id SERIAL PRIMARY KEY,
listerID TEXT NOT NULL,
price DOUBLE PRECISION NOT NULL,
gender TEXT NOT NULL,
roomCount INT NOT NULL,
bathroomCount INT NOT NULL,
street_name TEXT NOT NULL,
room TEXT,
city TEXT NOT NULL,
postal_code TEXT NOT NULL,
state TEXT,
country TEXT,
startTerm TEXT NOT NULL,
endTerm TEXT NOT NULL,
description TEXT,
subleaseID TEXT NOT NULL,
latitude DOUBLE PRECISION CHECK (latitude BETWEEN -90 AND 90),
longitude DOUBLE PRECISION CHECK (longitude BETWEEN -180 AND 180),
viewcount INTEGER DEFAULT 0
);

CREATE TABLE chatRooms (
id SERIAL PRIMARY KEY,
chatRoomID TEXT NOT NULL,
userID1 TEXT NOT NULL,
userID2 TEXT NOT NULL,
unreadCount1 INT DEFAULT 0,
unreadCount2 INT DEFAULT 0,
UNIQUE(userID1, userID2),
CHECK (userID1 <> userID2)
)

CREATE TABLE messages (
id TEXT PRIMARY KEY,
chatRoomID TEXT NOT NULL,
sender TEXT NOT NULL,
content TEXT NOT NULL,
timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
status TEXT DEFAULT 'sent',
)
